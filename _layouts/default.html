<!DOCTYPE html>
<html lang="en">
{% include head.html %}
<body>

  <div class="wrapper">
    {{ content }}
  </div>
  
  {% include analytics.html %}
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const wrap = document.querySelector('.carousel-wrap');
      if (!wrap) return;
  
      const scroller = wrap.querySelector('.carousel');
      const prev = wrap.querySelector('.carousel-ui .prev');
      const next = wrap.querySelector('.carousel-ui .next');
      const dots = Array.from(wrap.querySelectorAll('.carousel-ui .dots button'));
      if (!scroller || !prev || !next || !dots.length) return;
  
      const slideW = () => scroller.clientWidth;
      const idx = () => Math.round(scroller.scrollLeft / slideW());
      const go = (i) => {
        const clamped = Math.max(0, Math.min(i, dots.length - 1));
        scroller.scrollTo({ left: clamped * slideW(), behavior: 'smooth' });
        update(clamped);
      };
      const update = (i = idx()) => dots.forEach((b, j) => b.toggleAttribute('aria-current', j === i));
  
      prev.addEventListener('click', () => go(idx() - 1));
      next.addEventListener('click', () => go(idx() + 1));
      dots.forEach((b, i) => b.addEventListener('click', () => go(i)));
      scroller.addEventListener('scroll', () => requestAnimationFrame(() => update()));
      update(0);
    });
  </script>
  
  
</body>
</html>
