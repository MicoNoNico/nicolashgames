<!DOCTYPE html>
<html lang="en">
{% include head.html %}
<body>

  <div class="wrapper">
    {{ content }}
  </div>
  
  {% include analytics.html %}
  <script>
    (function () {
      const scroller = document.querySelector('.carousel');
      const prev = document.querySelector('.carousel-ui .prev');
      const next = document.querySelector('.carousel-ui .next');
      const dots = Array.from(document.querySelectorAll('.carousel-ui .dots button'));
      const slideW = () => scroller.clientWidth;
  
      const idx = () => Math.round(scroller.scrollLeft / slideW());
      const go = (i) => {
        const clamped = Math.max(0, Math.min(i, dots.length - 1));
        scroller.scrollTo({ left: clamped * slideW(), behavior: 'smooth' });
        update(clamped);
      };
      const update = (i = idx()) => dots.forEach((b, j) => b.toggleAttribute('aria-current', j === i));
  
      prev.addEventListener('click', () => go(idx() - 1));
      next.addEventListener('click', () => go(idx() + 1));
      dots.forEach((b, i) => b.addEventListener('click', () => go(i)));
      scroller.addEventListener('scroll', () => requestAnimationFrame(() => update()));
      update(0);
    })();
  </script>
  
</body>
</html>
